---
name: export
description: Export the validated roadmap to GitHub Issues, Linear, or other formats
argument-hint: "[roadmap-path] [--github | --linear | --markdown | --json]"
allowed-tools:
  - Read
  - Write
  - Bash
---

# Roadmap Export

Export the validated roadmap to external systems or formats.

## Workflow

1. **Read roadmap**: Load `.r2r/04-roadmap.md` and `.r2r/05-validation.md`
2. **Check validation**: Warn if validation status is FAIL
3. **Select format**: Based on argument (default: markdown)
4. **Transform data**: Convert to target format
5. **Write output**: Save to `.r2r/exports/`

## Export Formats

### --github (GitHub Issues + Milestones)

Creates files ready for `gh` CLI import:

```
.r2r/exports/
├── github/
│   ├── milestones.json      # GitHub milestone definitions
│   ├── issues/
│   │   ├── 001-milestone-1-issue-1.md
│   │   ├── 002-milestone-1-issue-2.md
│   │   └── ...
│   └── import.sh            # Script to create via gh CLI
```

**Milestone format** (milestones.json):
```json
[
  {
    "title": "M1: [Milestone Name]",
    "description": "[Description from roadmap]",
    "due_on": "2024-03-15T00:00:00Z"
  }
]
```

**Issue format** (individual .md files):
```markdown
---
title: "[Component/Task Name]"
labels: ["roadmap", "h1", "milestone-1"]
milestone: "M1: [Milestone Name]"
assignees: []
---

## Description
[From roadmap deliverable]

## Success Criteria
- [ ] [Criterion 1]
- [ ] [Criterion 2]

## Dependencies
- Blocked by: #[issue number]
- Blocks: #[issue number]

## Context
Part of: [Milestone Name]
Source: Research-to-Roadmap assessment

---
*Generated by research-to-roadmap plugin*
```

**Import script** (import.sh):
```bash
#!/bin/bash
# Import roadmap to GitHub

# Create milestones
for milestone in milestones.json; do
  gh api repos/:owner/:repo/milestones -f title="$title" -f due_on="$due"
done

# Create issues
for issue in issues/*.md; do
  gh issue create --title "$(head -1 $issue)" --body-file "$issue"
done
```

### --linear (Linear Issues)

Creates Linear-compatible import format:

```
.r2r/exports/
├── linear/
│   ├── projects.json        # Linear project/cycle definitions
│   ├── issues.csv           # Bulk import CSV
│   └── issues.json          # JSON format for API
```

### --markdown (Summary Document)

Creates a single shareable document:

```
.r2r/exports/
└── roadmap-summary.md       # Complete roadmap in one file
```

**Format**:
```markdown
# [Project Name] - Production Roadmap

**Generated**: [date]
**Validation Status**: [status]

## Timeline Overview
[Mermaid Gantt chart]

## Milestones

### H1: Ship Now
[Milestone details...]

### H2: Build Next
[Milestone details...]

### H3: Plan Later
[Milestone details...]

## Risk Summary
[Key risks from validation]

## Next Steps
[Action items]
```

### --json (Structured Data)

Creates machine-readable JSON:

```
.r2r/exports/
└── roadmap.json
```

**Schema**:
```json
{
  "project": {
    "name": "[name]",
    "created": "[ISO date]",
    "validation_status": "pass|caution|fail"
  },
  "milestones": [
    {
      "id": "m1",
      "name": "[name]",
      "horizon": "h1",
      "target_date": "[ISO date]",
      "deliverables": ["[d1]", "[d2]"],
      "success_criteria": ["[c1]", "[c2]"],
      "dependencies": ["m0"],
      "risks": [{"description": "[risk]", "mitigation": "[action]"}]
    }
  ],
  "risks": [...],
  "assumptions": [...]
}
```

## Output Format

Creates export in `.r2r/exports/[format]/`:

Also updates state:

```json
{
  "current_phase": "export",
  "completed_phases": ["assessment", "decomposition", "prioritization", "roadmap", "validation", "export"],
  "last_updated": "[ISO timestamp]",
  "exports": {
    "format": "github|linear|markdown|json",
    "path": ".r2r/exports/[format]/",
    "created": "[ISO timestamp]"
  }
}
```

## Validation Warnings

If validation status is CAUTION or FAIL, include warning in export:

```markdown
⚠️ **Warning**: This roadmap has [X] critical issues and [Y] warnings.
Review `.r2r/05-validation.md` before proceeding.
```

## Release Phase Integration

Include release phase tracking in all exports:

### GitHub Issues
Add labels for release phase:
- `phase:internal-build` - Alpha/dogfood stage
- `phase:private-preview` - Limited external users
- `phase:public-preview` - Open beta
- `phase:ga` - General availability

### Markdown Export
Include release phase section:

```markdown
## Release Phases

| Phase | Timeline | Exit Criteria |
|-------|----------|---------------|
| Internal Build | [dates] | 5+ internal users, no critical bugs |
| Private Preview | [dates] | 50+ external users, NPS >30 |
| Public Preview | [dates] | 1000+ users, SLA met |
| GA | [date] | Security audit passed, support ready |
```

## Feature Flag Lifecycle

When exporting to tracking systems, include feature flag plan:

### Flag Naming Convention
```
[project]_[feature]_[version]
Examples:
- checkout_ai_suggestions_v1
- search_vector_embeddings_beta
```

### Rollout Percentages
Include in milestone success criteria:

| Stage | Percentage | Duration | Purpose |
|-------|------------|----------|---------|
| Internal | 100% internal only | 1-2 weeks | Dogfood |
| Canary | 1% | 1-3 days | Catch critical issues |
| Beta | 5-10% | 1-2 weeks | Validate at scale |
| Rollout | 25% → 50% → 100% | 1-2 weeks each | Progressive release |

### Flag Cleanup Checklist
Include in final milestone:
- [ ] Feature at 100% for 2+ weeks
- [ ] No rollback needed
- [ ] Remove flag checks from code
- [ ] Delete flag from management system
- [ ] Update documentation (remove "beta" labels)

## Tips

- Always run `/r2r:validate` before export
- GitHub export requires `gh` CLI to be installed and authenticated
- For Linear, use the CSV format for bulk import via UI
- JSON format is useful for custom integrations
- Markdown format is best for sharing with stakeholders who don't use issue trackers
- Include feature flag plan for all user-facing features
- Reference `release-phases.md` skill for detailed phase criteria
